<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Meeting Time Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Global Meeting Time Helper</h1>
  <p class="small">
    Add cities below, then choose an optional date/time and meeting length.  
    Cities are sorted east to west by longitude. The URL hash is updated so you can share the setup.
  </p>

  <div
  id="loadError"
  class="error"
  role="alert"
  aria-live="assertive"
  style="display:none;"
></div>

  <div class="card">
    <h2>1. Add cities</h2>
    <p class="small">
      Start typing a city name (for example, <code>Toronto</code>) and select it from the suggestions, then click <strong>Add city</strong>.
      The list comes from <code>data/cities.json</code>.
    </p>

    <form id="addCityForm" class="flex" autocomplete="off">
      <div>
        <label>
          City<br>
          <input type="text" id="cityInput" list="cityDatalist" placeholder="Toronto">
        </label>
        <datalist id="cityDatalist">
          <!-- Filled by JS -->
        </datalist>
      </div>
      <div style="align-self:flex-end;">
        <button type="submit">Add city</button>
      </div>
    </form>
    <p
  id="addCityError"
  class="error"
  role="alert"
  aria-live="assertive"
  style="display:none;"
></p>
  </div>

  <div class="card">
  <h2>2. Meeting parameters</h2>
  <div class="flex">
    <div>
      <label for="dateInput">
        Date<br>
        <input type="date" id="dateInput">
      </label>
      <div class="small">
        Leave empty to work with a generic weekday pattern.
      </div>
    </div>
<div>
  <div>
    <input type="checkbox" id="timeEnabled">
    <label for="timeEnabled">Set a specific time (in your timezone)</label>
  </div>

  <div id="timeInputRow" style="display:none; margin-top:0.25rem;">
    <label for="timeInput">
      Time (UTC, optional)
    </label><br>
    <input type="time" id="timeInput">
  </div>
</div>
    <div>
      <label for="lengthInput">
        Length (minutes)<br>
        <select id="lengthInput">
          <option value="30">30</option>
          <option value="45">45</option>
          <option value="60" selected>60</option>
          <option value="90">90</option>
          <option value="120">120</option>
        </select>
      </label>
    </div>
  </div>
  <div style="margin-top:0.8rem;">
    <button id="recomputeBtn" type="button">Recompute suggestions</button>
  </div>
  <p class="small muted" style="margin-top:0.4rem;">
    Uses browser timezone data for DST. Around DST change weeks you still need human sanity checks.
  </p>
</div>

<div class="card" id="cardTimezones">
  <h2>3. Time zones and participants</h2>
  <p class="small">
    Each row represents a <strong>time zone</strong>, with an example city and the number of people in that zone.  
    Use the + / âˆ’ buttons to adjust headcount, or remove a row entirely.
  </p>
  <table id="citiesTable">
    <thead>
      <tr>
        <th>Time zone</th>
        <th>City</th>
        <th>Country</th>
        <th>DST</th>
        <th>People</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <!-- Filled by JS -->
    </tbody>
  </table>
</div>

<div class="card" id="cardSuggestions">
  <h2 id="suggestionsHeading">4. Suggested meeting times</h2>
  <div
    id="suggestionsContainer"
    class="small"
    role="status"
    aria-live="polite"
    aria-labelledby="suggestionsHeading"
  >
    Add at least one city to see suggestions.
  </div>
</div>

  <div class="card" id="cardMarkdown">
    <h2>5. GitHub issue Markdown</h2>
    <label for="markdownOutput">
      Vote in GitHub
    </label>
    <textarea id="markdownOutput" readonly></textarea>
    <div style="margin-top:0.5rem;">
      <button id="copyMarkdownBtn" type="button">Copy Markdown</button>
    </div>
    <p class="small"></p>
      Paste this into a GitHub issue and use reactions as votes.
    </p>

  </div>


<div class="card" id="cardMap" style="display:none">
  <h2>6. Participants map</h2>
  <p class="small">
    Approximate locations based on city time zones.
  </p>
  <div class="map-wrapper">
    <img
      src="img/world-map-timezone.svg"
      alt="World map with time zones"
      class="world-map-image"
    >
    <svg
      id="participantsMap"
      class="world-map-overlay"
      aria-hidden="false"
      role="img"
    ></svg>
  </div>
</div>

<footer
      <p class="small muted">
      Want to improve this tool? Check out our <a href="https://github.com/mgifford/timezone-helper">GitHub Repo</a>
    </p>
</footer>

  <script src="app.js"></script>
</body>
</html>